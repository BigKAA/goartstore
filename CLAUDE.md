# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

Artsore ‚Äî –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ ArtStore (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π). –°—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–∞ Python/FastAPI –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `old_artstore/` –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª. –ù–æ–≤–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–¥—ë—Ç—Å—è –Ω–∞ **Go**, –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π Go-–ø—Ä–æ–µ–∫—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/`.

### –¶–µ–ª—å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ (–∏–∑ task.md)

- –†–∞–∑–¥–µ–ª–∏—Ç—å –º–æ–¥—É–ª–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
- –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ–≤–∏–∑–∏—é API –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ Go
- –ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

| –ú–æ–¥—É–ª—å | –ü–æ—Ä—Ç—ã | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|-------|------------|--------|
| Storage Element | 8010-8019 | –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, WAL, attr.json, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è | ‚úÖ –ì–æ—Ç–æ–≤ (Phase 6) |
| Admin Module | 8000-8009 | Keycloak IdP, RBAC, —Ä–µ–µ—Å—Ç—Ä SE –∏ —Ñ–∞–π–ª–æ–≤, Service Accounts | üîÑ Phase 5 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ |
| Ingester Module | 8020-8029 | Streaming upload, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –≤—ã–±–æ—Ä SE, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ | ‚è≥ –ù–µ –Ω–∞—á–∞—Ç |
| Query Module | 8030-8039 | –ü–æ–∏—Å–∫ (PostgreSQL FTS), LRU cache, proxy download | ‚è≥ –ù–µ –Ω–∞—á–∞—Ç |

Admin UI –æ—Ç–º–µ–Ω—ë–Ω. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ API (Keycloak OIDC + API Gateway).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫**: Go 1.25+
- **HTTP**: `net/http` + `chi` router
- **OpenAPI**: oapi-codegen (v3.0.3), contract-first
- **–ë–î**: PostgreSQL 17, `pgx/v5` (–±–µ–∑ ORM), `golang-migrate` (embedded migrations)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT RS256 —á–µ—Ä–µ–∑ Keycloak (OAuth 2.0 / OIDC)
- **–ú–µ—Ç—Ä–∏–∫–∏**: Prometheus (`prometheus/client_golang`)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `slog` (stdlib) + JSON
- **–°–±–æ—Ä–∫–∞**: Docker multi-stage (`golang:1.25-alpine` ‚Üí `alpine:3.19`), Helm 3
- **–¢–µ—Å—Ç—ã**: Unit-—Ç–µ—Å—Ç—ã (`testcontainers-go`), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (bash + curl)

## –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞

- –û–±—â–∞—Ç—å—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–µ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
- –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –æ—Ç–≤–µ—Ç–∞ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, —Å–ø—Ä–æ—Å–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Å–µ md —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å linter
- –†–∞–∑—Ä–∞–±–æ—Ç–∫—É, –æ—Ç–ª–∞–¥–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Å—Ç–∏ **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Docker –∏–ª–∏ Kubernetes**
- –î–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤/—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Ñ–∞–π–ª hosts (–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ä—É—á–Ω–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏)

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- `kubectl` ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–±–æ—Ç—É —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∫–ª–∞—Å—Ç–µ—Ä–æ–º Kubernetes
- `helm` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å helm charts
- `docker` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

## –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

Harbor: https://harbor.kryukov.lan ‚Äî admin/password. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç `library`.

## –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä Kubernetes

- Gateway API (Envoy Gateway, gatewayClassName: `eg`)
- MetalLB (LoadBalancer, IP pool: 192.168.218.180-190)
- Ingress controller –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- cert-manager (ClusterIssuer: `dev-ca-issuer`)
- –î–æ–º–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏: `test1.kryukov.lan`, `test2.kryukov.lan`, `test3.kryukov.lan` ‚Üí 192.168.218.180
- –î–æ–º–µ–Ω –ø—Ä–æ–µ–∫—Ç–∞: `artsore.kryukov.lan` ‚Üí 192.168.218.180 (–≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ API Gateway)
- DNS —Å–µ—Ä–≤–µ—Ä: 192.168.218.9

## Git Workflow (GitHub Flow + Semver Tags)

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞. –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `GIT-WORKFLOW.md`.

### –í–µ—Ç–∫–∏

–û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ ‚Äî `main` (–≤—Å–µ–≥–¥–∞ deployable). Feature branches –æ—Ç main:
- `feature/`, `bugfix/`, `docs/`, `refactor/`, `test/`, `hotfix/`

### Commits ‚Äî Conventional Commits

```
<type>(<scope>): <subject>
```
–¢–∏–ø—ã: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

### Workflow

1. `git checkout main && git pull` ‚Üí `git checkout -b <type>/<description>`
2. –†–∞–±–æ—Ç–∞ –≤ –≤–µ—Ç–∫–µ
3. –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ¬´–°–æ–∑–¥–∞—Ç—å commit?¬ª
4. –ü–æ—Å–ª–µ commit ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å: –ª–æ–∫–∞–ª—å–Ω—ã–π merge (`--no-ff`) –∏–ª–∏ GitHub PR
5. –£–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É –ø–æ—Å–ª–µ merge

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

–í—Å–µ –º–æ–¥—É–ª–∏ –Ω–∞ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–µ—Ä—Å–∏–∏ `0.x.y` (semver):

- `0.Y.Z` ‚Äî —Å—Ç–∞–¥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Y = minor/milestone, Z = patch/bugfix)
- `1.0.0` ‚Äî –ø–µ—Ä–≤—ã–π production release (–≤—Å–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- –ë–∞–º–ø minor-–≤–µ—Ä—Å–∏–∏ (`0.1.0` ‚Üí `0.2.0`) ‚Äî **—Ç–æ–ª—å–∫–æ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- –ë–∞–º–ø patch-–≤–µ—Ä—Å–∏–∏ (`0.1.0` ‚Üí `0.1.1`) ‚Äî –±–∞–≥-—Ñ–∏–∫—Å—ã, –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –¢–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤

- –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: `v0.Y.Z-N` (—Å—É—Ñ—Ñ–∏–∫—Å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ)
- –ü—Ä–∏ —Ä–µ–ª–∏–∑–µ: `v0.Y.Z` (—Å—É—Ñ—Ñ–∏–∫—Å —É–±–∏—Ä–∞–µ—Ç—Å—è, patch —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è)

## –ü–ª–∞–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –µ–≥–æ –ø–æ —à–∞–±–ª–æ–Ω—É `.plantemplates/DEVELOPMENT_PLAN_TEMPLATE.md`
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–ª–∞–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `plans/`
- –ü–ª–∞–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º, —Ä–∞–∑–±–∏—Ç –Ω–∞ —Ñ–∞–∑—ã
- –û–¥–Ω–∞ —Ñ–∞–∑–∞ ‚Äî –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç AI
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –ø–ª–∞–Ω–∞ ‚Äî –æ—Ç–º–µ—á–∞—Ç—å –µ–≥–æ –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –≤ —Ñ–∞–π–ª–µ –ø–ª–∞–Ω–∞
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **–≤—Å–µ—Ö** –ø—É–Ω–∫—Ç–æ–≤ –ø–ª–∞–Ω–∞ ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ø–ª–∞–Ω –≤ `plans/archive/`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
.plantemplates/    ‚Äî –®–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–ª–∞–Ω–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
old_artstore/      ‚Äî –°—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç (Python/FastAPI) –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
src/               ‚Äî –ò—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–¥—ã Go-–º–æ–¥—É–ª–µ–π
  admin-module/    ‚Äî Admin Module (go.mod: github.com/arturkryukov/artsore/admin-module)
  storage-element/ ‚Äî Storage Element (go.mod: github.com/arturkryukov/artsore/storage-element)
plans/             ‚Äî –ü–ª–∞–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–∞–∫—Ç–∏–≤–Ω—ã–µ)
  archive/         ‚Äî –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã
docs/              ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  api-contracts/   ‚Äî OpenAPI 3.0.3 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
  api-review/      ‚Äî –ê–Ω–∞–ª–∏–∑ API —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
  briefs/          ‚Äî –ö—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π
  design/          ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç—ã
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Go-–º–æ–¥—É–ª—è (–æ–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω)

```
src/<module>/
‚îú‚îÄ‚îÄ cmd/<module>/main.go          ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generated/            ‚Äî oapi-codegen (types.gen.go, server.gen.go)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/             ‚Äî HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/           ‚Äî auth, logging, metrics
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors/               ‚Äî –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ API
‚îÇ   ‚îú‚îÄ‚îÄ config/                   ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ server/                   ‚Äî HTTP-—Å–µ—Ä–≤–µ—Ä, graceful shutdown
‚îÇ   ‚îú‚îÄ‚îÄ domain/model/             ‚Äî –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ service/                  ‚Äî –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ ...                       ‚Äî –ú–æ–¥—É–ª—å-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
‚îú‚îÄ‚îÄ charts/<module>/              ‚Äî Helm chart
‚îú‚îÄ‚îÄ tests/                        ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yaml
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ oapi-codegen-*.yaml           ‚Äî –ö–æ–Ω—Ñ–∏–≥–∏ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ go.sum
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ Kubernetes
- Unit-—Ç–µ—Å—Ç—ã: `go test ./...` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–¥—É–ª—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: bash-—Å–∫—Ä–∏–ø—Ç—ã –≤ `tests/scripts/` (curl + assertions)
- –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Helm chart –≤ `tests/helm/`

## –ö–ª—é—á–µ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|------|----------|
| –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è | `docs/REQUIREMENTS.md` | –ü–æ–ª–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è |
| API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã | `docs/api-contracts/*.yaml` | OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π |
| –ë—Ä–∏—Ñ—ã –º–æ–¥—É–ª–µ–π | `docs/briefs/*.md` | –ö—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥—É–ª–µ–π |
| –î–∏–∑–∞–π–Ω Admin Module | `docs/design/admin-module-design.md` | –¢–µ—Ö–¥–∏–∑–∞–π–Ω: —Å—Ö–µ–º–∞ –ë–î, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ—Ç–æ–∫–∏ |
| –ü–ª–∞–Ω Admin Module | `plans/admin-module.md` | –ê–∫—Ç–∏–≤–Ω—ã–π –ø–ª–∞–Ω (Phase 5-6 pending) |
| –ü–ª–∞–Ω SE (–∞—Ä—Ö–∏–≤) | `plans/archive/storage-element-development-plan.md` | –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –ø–ª–∞–Ω SE |

## –°–ø—Ä–∞–≤–∫–∞ –ø–æ —Å—Ç–∞—Ä–æ–º—É –ø—Ä–æ–µ–∫—Ç—É (old_artstore/)

–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:

- **Attribute-First Storage Model**: `*.attr.json` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ SE)
- **WAL Protocol**: Write-Ahead Log –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∞–π–ª–∞–º–∏ ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ SE)
- **Storage Element Modes**: edit ‚Üí rw ‚Üí ro ‚Üí ar (–∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ö—Ä–∞–Ω–∏–ª–∏—â–∞) ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ SE)
- **Leader/Follower —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è**: NFS flock-based leader election ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ SE, –≤–º–µ—Å—Ç–æ Redis)
- **GC –∏ Reconcile**: –°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è attr.json ‚Üî —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ SE)
- **Service Discovery**: –£–ø—Ä–æ—â–µ–Ω–æ ‚Äî Admin Module –∫–∞–∫ —Ä–µ–µ—Å—Ç—Ä (–≤–º–µ—Å—Ç–æ Redis Pub/Sub)
- **Sequential Fill Algorithm**: –í—ã–±–æ—Ä Storage Element –ø–æ priority –∏ capacity (–±—É–¥–µ—Ç –≤ Ingester)
- **Circuit Breaker**: –î–ª—è inter-service communications (–±—É–¥–µ—Ç –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `old_artstore/README.md`, `old_artstore/CLAUDE.md`, –º–æ–¥—É–ª—å–Ω—ã–µ README.
